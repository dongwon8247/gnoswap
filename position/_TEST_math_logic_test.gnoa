package position

import (
	"testing"
)

func TestDryMintInRange(t *testing.T) {
	m0, m1 := DryMint(
		10000, // tickCurrent int32
		7000,  // tickLower int32
		15000, // tickUpper int32
		10000, // amount0Desired bigint
		16000, // amount1Desired bigint
	)

	shouldEQ(t, m0, bigint(9347))
	shouldEQ(t, m1, bigint(15999))
}

func TestDryMintLowerRange(t *testing.T) {
	m0, m1 := DryMint(
		7000,  // tickCurrent int32
		5000,  // tickLower int32
		6000,  // tickUpper int32
		10000, // amount0Desired bigint
		16000, // amount1Desired bigint
	)

	shouldEQ(t, m0, bigint(0))
	shouldEQ(t, m1, bigint(15999))
}

func TestDryMintUpperRange(t *testing.T) {
	m0, m1 := DryMint(
		7000,  // tickCurrent int32
		9000,  // tickLower int32
		11000, // tickUpper int32
		10000, // amount0Desired bigint
		16000, // amount1Desired bigint
	)

	shouldEQ(t, m0, bigint(9999))
	shouldEQ(t, m1, bigint(0))
}

/* HELPER */
func shouldEQ(t *testing.T, got, expected interface{}) {
	if got != expected {
		t.Errorf("got %v, expected %v", got, expected)
	}
}
